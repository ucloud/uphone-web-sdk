'use strict';import _0xb71b30 from'./client.js';import _0x35a428 from'./keylayouts.js';const control=require('control');var CODE_NUMBER={'CodeLButtonDown':0x65,'CodeLButtonUp':0x66,'CodeMouseMove':0x67,'CodeLButtonDBClick':0x68,'CodeRButtonDown':0x69,'CodeRButtonUp':0x6a,'CodeKeyDown':0x6b,'CodeKeyUp':0x6c,'CodeChar':0x6d,'CodeMButtonDown':0xd2,'CodeMButtonUp':0xd3,'CodeMouseWheel':0x70,'CodeDefinition':0x74,'CodeFingerDown':0x75,'CodeFingerUp':0x76,'CodeFingerMove':0x73,'CodeFingersDown':0x71,'CodeFingersUp':0x72,'CodeClipBoard':0x84,'CodeStartGame':0x85,'CodeWeixinPay':0xc8,'CodeStartAppCmd':0xd2,'CodeConnDisplaced':0x88};class AppController{constructor(_0x1e4947){this['pcClient_']=null;this['offsetX']='';this['offsetY']='';this['upsetX']='';this['upsetY']='';this['moveX']='';this['moveY']='';this['deltaY']='';this['keyCode']=0xddd74^0xddd74;this['touches']=[];this['fingers']=![];this['keyCodearr']=[];this['fingervalue']={};this['setDefinite']='';this['videoWidth']='';this['videoHeight']='';this['messagedata']={};this['stream']=null;this['count']=0xc6ab6^0xc6ab6;this['timer']=null;this['ice']='disconnected';this['restartinterval']=0x92d87^0x92c73;this['restartcount']=0xc0b48^0xc0b48;this['currentRoundTripTime']={'currentRoundTripTime':''};this['framesPerSecond']={'framesPerSecond':''};this['answercode']={'answercode':'1'};this['iceconnectionstate']={'iceconnectionstate':'1'};this['gamestatus']={'gamestatus':'2'};this['resolution']={'status':'1','data':{}};this['mdown']=![];this['remoteVideo_']=document['querySelector']('#remote-video');this['remoteVideo_']['addEventListener']('mousedown',this['sendmouseDown']['bind'](this));this['remoteVideo_']['addEventListener']('mouseup',this['sendmouseUp']['bind'](this));this['remoteVideo_']['addEventListener']('mousemove',this['sendmouseMove']['bind'](this));this['remoteVideo_']['addEventListener']('mouseout',this['sendmouseOut']['bind'](this));document['addEventListener']('keydown',this['sendkeyDown']['bind'](this));document['addEventListener']('keyup',this['sendkeyUp']['bind'](this));this['timestamp']=0x86256^0x86256;this['recorder']=null;this['statstimer']=null;this['restarttimer']=null;this['stopped']=![];this['channelopened']=![];this['beforeopenkind']=0xbcc51^0xbcc51;this['updatekind']=0xe7aea^0xe7aea;this['hassended']=![];this['maincontrol']=![];this['startTime']=null;this['sysInfo']=this['getExplore']();this['loadingParams_']={..._0x1e4947,'peerConnectionConfig':{'iceServers':[{'urls':'turn:turn.ugame.ucloud.cn:3478','username':'ucloud','credential':'ucloud.123cn'}]},'debug':!![]};var _0x560d51=Promise['resolve']({});Promise['resolve'](_0x560d51)['then'](function(_0x31e547){if(_0x31e547){Object['keys'](_0x31e547)['forEach'](function(_0x4c9625){this['loadingParams_'][_0x4c9625]=_0x31e547[_0x4c9625];}['bind'](this));}}['bind'](this))['catch'](function(_0x28063d){this['trace_']('Error\x20initializing:\x20'+_0x28063d['message']);}['bind'](this));}['sendmouseDown'](_0x3c334a){this['mdown']=!![];let _0x4ad5b8={'name':'touchstart','button':_0x3c334a['button'],'offsetX':_0x3c334a['offsetX'],'offsetY':_0x3c334a['offsetY'],'timeStamp':_0x3c334a['timeStamp']};this['sendMessage'](_0x4ad5b8);}['sendmouseUp'](_0x593f2b){this['mdown']=![];let _0x576962={'name':'touchend','button':_0x593f2b['button'],'offsetX':_0x593f2b['offsetX'],'offsetY':_0x593f2b['offsetY'],'timeStamp':_0x593f2b['timeStamp']};this['sendMessage'](_0x576962);}['sendmouseMove'](_0x588896){if(this['mdown']){let _0x3729e8={'name':'touchmove','button':_0x588896['button'],'offsetX':_0x588896['offsetX'],'offsetY':_0x588896['offsetY'],'timeStamp':_0x588896['timeStamp']};this['sendMessage'](_0x3729e8);}}['sendmouseOut'](_0x2a80e3){this['mdown']=![];let _0x5b0203={'name':'touchend','button':_0x2a80e3['button'],'offsetX':_0x2a80e3['offsetX'],'offsetY':_0x2a80e3['offsetY'],'timeStamp':_0x2a80e3['timeStamp']};this['sendMessage'](_0x5b0203);}['sendkeyDown'](_0x2ea7e9){let _0x35e527={'name':'keydown','keyCode':transKeyCode(_0x2ea7e9['keyCode'])};if((_0x2ea7e9['ctrlKey']||_0x2ea7e9['metaKey'])&&_0x2ea7e9['keyCode']===(0x92855^0x92803)){_0x35e527['name']='clipboard';}this['sendMessage'](_0x35e527);}['sendkeyUp'](_0x58bde9){let _0x5b0a45={'name':'keyup','keyCode':transKeyCode(_0x58bde9['keyCode'])};this['sendMessage'](_0x5b0a45);}['backHome'](){let _0x57c8c8={'name':'backhome'};this['sendMessage'](_0x57c8c8);}['onPhoneMenu'](){let _0x48352f={'name':'phonemenu'};this['sendMessage'](_0x48352f);}['getExplore'](){var _0x2f98a5={};var _0x3f9ed8=navigator['userAgent']['toLowerCase']();var _0xd6d65d;(_0xd6d65d=_0x3f9ed8['match'](/rv:([\d.]+)\) like gecko/))?_0x2f98a5['ie']=_0xd6d65d[0xcb040^0xcb041]:(_0xd6d65d=_0x3f9ed8['match'](/msie ([\d\.]+)/))?_0x2f98a5['ie']=_0xd6d65d[0x991bf^0x991be]:(_0xd6d65d=_0x3f9ed8['match'](/edge\/([\d\.]+)/))?_0x2f98a5['edge']=_0xd6d65d[0x1]:(_0xd6d65d=_0x3f9ed8['match'](/firefox\/([\d\.]+)/))?_0x2f98a5['firefox']=_0xd6d65d[0x1]:(_0xd6d65d=_0x3f9ed8['match'](/(?:opera|opr).([\d\.]+)/))?_0x2f98a5['opera']=_0xd6d65d[0x1]:(_0xd6d65d=_0x3f9ed8['match'](/chrome\/([\d\.]+)/))?_0x2f98a5['chrome']=_0xd6d65d[0x1]:(_0xd6d65d=_0x3f9ed8['match'](/version\/([\d\.]+).*safari/))?_0x2f98a5['safari']=_0xd6d65d[0x1]:0x3477c^0x3477c;if(_0x2f98a5['ie'])return'IE:\x20'+_0x2f98a5['ie'];if(_0x2f98a5['edge'])return'EDGE:\x20'+_0x2f98a5['edge'];if(_0x2f98a5['firefox'])return'Firefox:\x20'+_0x2f98a5['firefox'];if(_0x2f98a5['chrome'])return'Chrome:\x20'+_0x2f98a5['chrome'];if(_0x2f98a5['opera'])return'Opera:\x20'+_0x2f98a5['opera'];if(_0x2f98a5['safari'])return'Safari:\x20'+_0x2f98a5['safari'];return'Unkonwn';}['startConnection'](){if(this['loadingParams_']['Id']){this['trace_']('start\x20to\x20connect:\x20'+this['loadingParams_']['Id']);this['startSignaling_']();this['timestamp']=Date['now']();}}['reStart'](){if(this['restarttimer']){clearTimeout(this['restarttimer']);this['restarttimer']=null;this['trace_']('clear\x20restart\x20timer,\x20ready\x20to\x20restart.');}this['closeConnection']();this['trace_']('===restart===,\x20wait\x20time(ms):\x20'+this['restartinterval']);this['restarttimer']=setTimeout(()=>{this['startConnection']();},this['restartinterval']);if(this['restartcount']<(0x6b1c4^0x6b1c7)){this['restartcount']+=0x1;}else{this['restartinterval']=0xb2980^0xb2238;}}['getLastTimeStamp'](){return this['timestamp'];}['createPcClient_'](){this['pcClient_']=new _0xb71b30(this['loadingParams_'],this['startTime']);this['pcClient_']['onremotestreamadded']=this['onRemoteStreamAdded_']['bind'](this);this['pcClient_']['onerror']=this['trace_']['bind'](this);this['pcClient_']['onchangedefinit']=this['onchangedefinit_']['bind'](this);this['pcClient_']['onchangestatus']=this['onchangestatus']['bind'](this);this['pcClient_']['onchangeicestatus']=this['onchangeicestatus']['bind'](this);this['pcClient_']['onresolutionstatus']=this['onresolutionstatus']['bind'](this);this['pcClient_']['onmessagehandle']=this['onmessagehandle']['bind'](this);this['pcClient_']['onchannelstatus']=this['onchannelstatus']['bind'](this);this['getpeerstates']();}['onchangestatus'](_0x20fc85){this['answercode']['answercode']=_0x20fc85;}['onchangeicestatus'](_0x2fb61d){this['trace_']('ice\x20state:\x20'+_0x2fb61d);this['iceconnectionstate']['iceconnectionstate']=_0x2fb61d;this['ice']=_0x2fb61d;}['onresolutionstatus'](_0x335e23){let _0x16b76c={'status':_0x335e23['status']||'','data':_0x335e23['data']||''};var _0xe5a40f=_0x335e23['data']['height']||'';var _0x2d16d4=_0x335e23['data']['width']||'';if(_0xe5a40f==0x870&&_0x2d16d4==0x438){_0x16b76c['id']=0x7db2b^0x7db2d;}if(_0xe5a40f==(0xadd9b^0xad9a3)&&_0x2d16d4==0x780){_0x16b76c['id']=0x5;}if(_0xe5a40f==(0x1ea81^0x1ef21)&&_0x2d16d4==0x2d0){_0x16b76c['id']=0x76e94^0x76e97;}if(_0xe5a40f==0x2d0&&_0x2d16d4==(0x1cd94^0x1c894)){_0x16b76c['id']=0xb85e8^0xb85ea;}if(_0xe5a40f==0x21c&&_0x2d16d4==0x3c0){_0x16b76c['id']=0xee114^0xee115;}if(_0xe5a40f==(0xdbd20^0xdbee0)&&_0x2d16d4==0x1e0){_0x16b76c['id']=0x0;}this['resolution']['id']=_0x16b76c['id'];this['resolution']['status']=_0x16b76c['status'];this['resolution']['data']=_0x16b76c['data'];}['maybeCreatePcClientAsync_'](){return new Promise(function(_0x52cab8,_0xc3deab){if(this['pcClient_']){_0x52cab8();return;}this['createPcClient_']();_0x52cab8();}['bind'](this));}['startSignaling_'](){this['trace_']('Starting\x20signaling.');this['startTime']=window['performance']['now']();this['maybeCreatePcClientAsync_']()['then'](function(){this['pcClient_']['startCreateDataChannel']();this['pcClient_']['startAsCaller'](this['loadingParams_']['offerOptions']);}['bind'](this))['catch'](function(_0x13b4b6){this['trace_']('Create\x20PeerConnection\x20exception:\x20'+_0x13b4b6['message']);}['bind'](this));}['startgamestatus'](_0x349f99){this['trace_'](_0x349f99);if(_0x349f99['error']==0x0){this['gamestatus']['gamestatus']='success';}else{this['gamestatus']['gamestatus']='fail';}}['forceconnent'](){this['pcClient_']['forceconnection']()['then'](_0x80bff9=>{if(_0x80bff9==0x88){}});}['onstatus'](_0xadafb4,_0x20e2ea){if(_0xadafb4=='devicestatus'&&this['answercode']['answercode']){var _0x4ebfe0=this['answercode']['answercode'];Object['defineProperty'](this['answercode'],'answercode',{'set':function(_0x4e18be){var _0x22e55c=_0x4e18be;if(_0x4ebfe0!=_0x22e55c){_0x20e2ea(_0x22e55c);_0x4ebfe0=_0x22e55c;}else{_0x20e2ea(_0x22e55c);}}});}else if(_0xadafb4=='networkstatus'&&this['iceconnectionstate']['iceconnectionstate']){var _0x399530=this['iceconnectionstate']['iceconnectionstate'];Object['defineProperty'](this['iceconnectionstate'],'iceconnectionstate',{'set':function(_0x463c88){var _0x229e29=_0x463c88;if(_0x399530!=_0x229e29){_0x20e2ea(_0x229e29);_0x399530=_0x229e29;}else{_0x20e2ea(_0x229e29);}}});}else if(_0xadafb4=='resolution'&&this['resolution']['status']){var _0x54fcaf=this['resolution']['status'];Object['defineProperty'](this['resolution'],'status',{'set':function(_0x21c958){var _0x1bd3c0=_0x21c958;if(_0x54fcaf!=_0x1bd3c0){_0x20e2ea(_0x1bd3c0);_0x54fcaf=_0x1bd3c0;}else{_0x20e2ea(_0x1bd3c0);}}});}else if(_0xadafb4=='gamestatus'&&this['gamestatus']['gamestatus']){var _0x54fcaf=this['gamestatus']['gamestatus'];Object['defineProperty'](this['gamestatus'],'gamestatus',{'set':function(_0xf790b4){var _0x3ee624=_0xf790b4;if(_0x54fcaf!=_0x3ee624){_0x20e2ea(_0x3ee624);_0x54fcaf=_0x3ee624;}else{_0x20e2ea(_0x3ee624);}}});}else{setTimeout(()=>{this['onstatus'](_0xadafb4,_0x20e2ea);},0xac1c0^0xac1c0);}}['setmaincontrol'](_0x4121c1){this['maincontrol']=_0x4121c1;}['onchannelstatus'](_0x3c658d){if(_0x3c658d=='open'){this['channelopened']=!![];if(!this['hassended']){if(this['doUpdateWork'](this['updatekind'])){this['trace_'](this['loadingParams_']['Id']+'\x20onchannelstatus\x20send\x20start\x20update\x20kind:\x20'+this['updatekind']);}this['hassended']=!![];this['beforeopenkind']=0x0;}}else{this['channelopened']=![];}this['trace_']('channel\x20state:\x20'+_0x3c658d+'\x20'+this['channelopened']);}['sendupdatenotice'](_0x46e381){this['updatekind']=_0x46e381;if(this['channelopened']){this['doUpdateWork'](this['updatekind']);this['trace_']('sendupdatenotice\x20send\x20start\x20update.');this['hassended']=!![];}else{if(this['beforeopenkind']==0x1){if(_0x46e381==0x3){this['updatekind']=0x1;this['trace_'](this['loadingParams_']['Id']+'\x20update\x20kind\x20change\x20to\x20'+this['updatekind']);}}this['beforeopenkind']=_0x46e381;}}['doUpdateWork'](_0x4b084f){if(this['maincontrol']){return 0x0;}if(_0x4b084f==0x1){this['onStartUpdate']();}else if(_0x4b084f==(0xd0ec4^0xd0ec6)){this['onStopUpdate']();}else{this['trace_']('nothing\x20to\x20do.');}return 0x1;}['onmessagehandle'](_0x5765e8){console['log'](_0x5765e8);this['trace_'](_0x5765e8);var _0x2e0001=JSON['parse'](_0x5765e8);var _0x14c982=_0x2e0001['code'];var _0x367fdc=_0x2e0001['data'];this['startgamestatus'](_0x2e0001);switch(_0x14c982){case CODE_NUMBER['CodeWeixinPay']:var _0x5508f2=_0x367fdc['type'];var _0x3cccdf=_0x367fdc['uri'];this['trace_'](_0x5508f2+'\x20'+_0x3cccdf);this['sendPayRequest_'](_0x3cccdf);break;case CODE_NUMBER['CodeConnDisplaced']:this['answercode']['answercode']=_0x14c982;break;default:break;}}['openPayWindow'](_0x1707cf,_0x5efd8b){let _0x3fcbf6=document['createElement']('a');_0x3fcbf6['setAttribute']('href',_0x1707cf);_0x3fcbf6['setAttribute']('target','_blank');_0x3fcbf6['setAttribute']('id',_0x5efd8b);_0x3fcbf6['setAttribute']('rel','https://www.wdyxgames.com');if(!document['getElementById'](_0x5efd8b)){document['body']['appendChild'](_0x3fcbf6);}_0x3fcbf6['click']();}['sendPayRequest_'](_0x37a00b){this['trace_']('sendPayRequest\x20called.');var _0x18e1c9=decodeURIComponent(_0x37a00b);this['trace_']('payUrl:\x20'+_0x18e1c9);var _0x1d3969=_0x18e1c9['indexOf']('?');if(_0x1d3969!==-(0x66f4d^0x66f4c)){var _0xca490c=_0x18e1c9['substring'](_0x1d3969+(0x68d5d^0x68d5c));var _0x55f43d=_0xca490c['split']('&');if(_0x55f43d['length']===0x4){const _0x551522={'appId':'wx77d53b84434b9d9a','timeStamp':Date['parse'](new Date())/(0x9ed01^0x9eee9),'nonceStr':this['getKeyValue_'](_0x55f43d[0x2]),'package':_0x55f43d[0x0],'signType':'MD5','paySign':this['getKeyValue_'](_0x55f43d[0x3])};this['trace_']('payParam:\x20'+JSON['stringify'](_0x551522));}}}['getKeyValue_'](_0x4f3fed){var _0x364da3=_0x4f3fed['indexOf']('=');if(_0x364da3!==-(0x6a955^0x6a954)){return _0x4f3fed['substring'](_0x364da3+0x1);}return'';}['onchangedefinit_'](_0x27e2e1={}){this['messagedata']=_0x27e2e1;this['trace_'](this['messagedata']);}['closeConnection'](){this['stream']=null;this['trace_']('closeConnection\x20called.');if(this['statstimer']!=null){clearInterval(this['statstimer']);this['statstimer']=null;this['trace_']('close\x20stats\x20timer\x20interval.');}if(this['restarttimer']!=null){clearTimeout(this['restarttimer']);this['restarttimer']=null;this['trace_']('close\x20restart\x20timer.');}if(this['pcClient_']){this['pcClient_']['close']();this['pcClient_']=null;}}['onRemoteStreamAdded_'](_0x168d58){let _0x1a32c5=this;this['stream']=_0x168d58;this['restartinterval']=0x1f4;this['restartcount']=0xcebda^0xcebda;this['trace_']('Remote\x20stream\x20added.');if(this['remoteVideo_']){this['remoteVideo_']['onloadeddata']=function _0x5c01d1(){_0x1a32c5['videoWidth']=this['videoWidth'];_0x1a32c5['videoHeight']=this['videoHeight'];};this['remoteVideo_']['onresize']=function _0xec0760(){};}}['getRemoteStream'](){return this['stream'];}['getpeerstates'](){var _0x2e38bf=this;if(this['pcClient_']){this['statstimer']=setInterval(()=>{if(this['pcClient_']!=null){this['pcClient_']['getPeerConnectionStats'](this['getstats']['bind'](_0x2e38bf));}},0x3e8);}}['getstats'](_0x5b35a5){_0x5b35a5['forEach'](_0x1f95b7=>{if(_0x1f95b7['type']=='candidate-pair'&&_0x1f95b7['currentRoundTripTime']){this['currentRoundTripTime']['currentRoundTripTime']=_0x1f95b7['currentRoundTripTime']*0x3e8;}if(_0x1f95b7['type']=='inbound-rtp'&&_0x1f95b7['framesPerSecond']){this['framesPerSecond']['framesPerSecond']=_0x1f95b7['framesPerSecond'];}});}['getNetDelay'](_0x259265){if(this['currentRoundTripTime']['currentRoundTripTime']){_0x259265(this['currentRoundTripTime']['currentRoundTripTime']);var _0x537540=this['currentRoundTripTime']['currentRoundTripTime'];Object['defineProperty'](this['currentRoundTripTime'],'currentRoundTripTime',{'set':function(_0x112a97){var _0x3fe2ff=_0x112a97;if(_0x537540!=_0x3fe2ff){_0x259265(_0x3fe2ff);_0x537540=_0x3fe2ff;}}});}else{setTimeout(()=>{this['getNetDelay'](_0x259265);},0x3e8);}}['getcurrentfps'](_0x4f8996){if(this['framesPerSecond']['framesPerSecond']){_0x4f8996(this['framesPerSecond']['framesPerSecond']);var _0x46787d=this['framesPerSecond']['framesPerSecond'];Object['defineProperty'](this['framesPerSecond'],'framesPerSecond',{'set':function(_0x4665bb){var _0x165269=_0x4665bb;if(_0x46787d!=_0x165269){_0x4f8996(_0x165269);_0x46787d=_0x165269;}}});}else{setTimeout(()=>{this['getcurrentfps'](_0x4f8996);},0x3e8);}}['sendMessage'](_0x2fd076){if(this['ice']!=='connected'){return;}this['timestamp']=Date['now']();var _0x194307={'name':_0x2fd076['name']||'','gamename':_0x2fd076['gamename']||'','jobid':_0x2fd076['jobid']||'','offsetWidth':_0x2fd076['offsetWidth']||'','offsetHeight':_0x2fd076['offsetHeight']||'','offsetX':_0x2fd076['offsetX']||'','offsetY':_0x2fd076['offsetY']||'','timeStamp':_0x2fd076['timeStamp']||'','button':_0x2fd076['button']||'','buttontype':_0x2fd076['buttontype']||'','wheelDelta':_0x2fd076['wheelDelta']||'','keyCode':_0x2fd076['keyCode']||'','content':_0x2fd076['content']||''};if(_0x194307['name']=='keydown'||_0x194307['name']=='keyup'){this['onkeyCodeSend'](_0x194307);}if(_0x194307['name']=='touchstart'){this['onTouchDownSend'](_0x194307);}if(_0x194307['name']=='touchend'){this['onTouchUpSend'](_0x194307);}if(_0x194307['name']=='touchmove'){this['onTouchMoveSend'](_0x194307);}if(_0x194307['name']=='backhome'){this['onBackHome'](_0x194307);}if(_0x194307['name']=='phonemenu'){this['clearUp'](_0x194307);}if(_0x194307['name']=='backlast'){this['onBackLast'](_0x194307);}if(_0x194307['name']=='clipboard'){this['onSendClipboard']();}if(_0x194307['name']=='startgame'){this['onStartGame'](_0x194307);}if(_0x194307['name']=='forcetk'){this['onRestartTk'](_0x194307);}if(_0x194307['name']=='startupdate'){this['onStartUpdate']();}if(_0x194307['name']=='stopupdate'){this['onStopUpdate']();}}['onSendChannelData_'](_0x4af45e){if(this['pcClient_']!==null){return this['pcClient_']['sendDataMessage'](_0x4af45e);}else{return new Promise((_0x271a00,_0x16631d)=>{_0x271a00({'sendstatus':'failed','sendmessage':_0x4af45e});});}}['onStartUpdate'](){var _0xcc60f6=control['lookup']('raw_msg');var _0x2f3ba4={'@type':'ucloud.secm','v':0x2};var _0x4d5ae4={'code':0x86,'msg':_0x2f3ba4};var _0x22e493=_0xcc60f6['encode'](_0xcc60f6['fromObject'](_0x4d5ae4))['finish']();this['onSendChannelData_'](_0x22e493)['then'](_0x555b10=>{if(_0x555b10['sendstatus']!='success'){this['trace_']('onStartUpdate\x20send\x20failed,retry\x20one\x20time.'+JSON['stringify'](_0x555b10));this['onSendChannelData_'](_0x22e493);}});}['onStopUpdate'](){var _0x29b221=control['lookup']('raw_msg');var _0x2066b5={'code':0x87,'msg':''};var _0x550cf9=_0x29b221['encode'](_0x29b221['create'](_0x2066b5))['finish']();this['trace_'](_0x29b221['decode'](_0x550cf9));this['onSendChannelData_'](_0x550cf9)['then'](_0x53fb23=>{this['trace_']('onStopUpdate:\x20'+JSON['stringify'](_0x53fb23));});}['startGame'](_0x4a5f47){var _0x4a5f47={'code':CODE_NUMBER['CodeStartGame'],'body':{'name':_0x4a5f47['gamename'],'jobid':_0x4a5f47['jobid']}};this['onSendChannelData_'](JSON['stringify'](_0x4a5f47))['then'](_0x26787b=>{});}['onRestartTk'](_0x29441c){var _0x29441c={'code':CODE_NUMBER['CodeStartAppCmd'],'body':{'cmd':0x3e9,'content':_0x29441c['content'],'requestId':this['pcClient_']['generateUUID_']()['substring'](0x0,0x8)}};console['log'](_0x29441c);this['onSendChannelData_'](JSON['stringify'](_0x29441c))['then'](_0x21f6a1=>{this['trace_'](_0x21f6a1);});}['onSendClipboard'](){if(navigator['clipboard']===undefined){return;}navigator['clipboard']['readText']()['then'](_0x273275=>{if(_0x273275['length']>(0x73d39^0x73d39)){var _0x5ab84d={'body':{'data':_0x273275}};console['log'](_0x5ab84d);_0x5ab84d['code']=CODE_NUMBER['CodeClipBoard'];this['onSendChannelData_'](JSON['stringify'](_0x5ab84d))['then'](_0x2e8a91=>{});}});}['onkeyCodeSend'](_0x246471){var _0x26656c=control['lookup']('raw_msg');var _0x297f54=_0x246471['keyCode'];var _0x2fd259={'msg':{'@type':'ucloud.kb','v':_0x297f54},'timestamp':_0x246471['timeStamp']};if(_0x246471['name']=='keydown'){_0x2fd259['code']=CODE_NUMBER['CodeKeyDown'];}else{_0x2fd259['code']=CODE_NUMBER['CodeKeyUp'];}var _0x2669e0=_0x26656c['encode'](_0x26656c['fromObject'](_0x2fd259))['finish']();this['onSendChannelData_'](_0x2669e0)['then'](_0x2c39da=>{});}['onTouchDownSend'](_0x4e5877){this['touches']['push'](_0x4e5877);var _0x2892c0=control['lookup']('finger');var _0x1cf7e1=control['lookup']('raw_msg');var _0x25dff7={'code':0x73,'msg':'','motionFs':[],'timestamp':_0x4e5877['timeStamp']};var _0x9fc169;this['touches']['forEach']((_0x54a0b3,_0x241777)=>{if(this['remoteVideo_']){var _0x3403bc={'fid':Math['abs'](_0x54a0b3['button']),'x':_0x54a0b3['offsetX']/this['remoteVideo_']['offsetWidth'],'y':_0x54a0b3['offsetY']/this['remoteVideo_']['offsetHeight']};}else{var _0x3403bc={'fid':Math['abs'](_0x54a0b3['button']),'x':_0x54a0b3['offsetX']/_0x54a0b3['offsetWidth'],'y':_0x54a0b3['offsetY']/_0x54a0b3['offsetHeight']};}_0x25dff7['motionFs']['push'](_0x2892c0['create'](_0x3403bc));});_0x9fc169=_0x1cf7e1['encode'](_0x1cf7e1['create'](_0x25dff7))['finish']();this['onSendChannelData_'](_0x9fc169)['then'](_0x2ae600=>{});}['onTouchUpSend'](_0x29bf06){var _0x4a0538='';this['touches']['forEach']((_0x1adeba,_0x23c945)=>{if(_0x1adeba['button']==_0x29bf06['button']){_0x4a0538=_0x23c945;}});this['touches']['splice'](_0x4a0538,0x5b013^0x5b012);var _0x485869=control['lookup']('finger');var _0x39dc9f=control['lookup']('raw_msg');var _0x8c2d44={'code':0x73,'msg':'','motionFs':[],'timestamp':_0x29bf06['timeStamp']};var _0x5e1346;this['touches']['length']&&this['touches']['forEach']((_0x2c1cc0,_0x81bfc)=>{if(this['remoteVideo_']){var _0x36d625={'fid':Math['abs'](_0x2c1cc0['button']),'x':_0x2c1cc0['offsetX']/this['remoteVideo_']['offsetWidth'],'y':_0x2c1cc0['offsetY']/this['remoteVideo_']['offsetHeight']};}else{var _0x36d625={'fid':Math['abs'](_0x2c1cc0['button']),'x':_0x2c1cc0['offsetX']/_0x2c1cc0['offsetWidth'],'y':_0x2c1cc0['offsetY']/_0x2c1cc0['offsetHeight']};}_0x8c2d44['motionFs']['push'](_0x485869['create'](_0x36d625));});_0x5e1346=_0x39dc9f['encode'](_0x39dc9f['create'](_0x8c2d44))['finish']();this['onSendChannelData_'](_0x5e1346)['then'](_0x4645c2=>{});}['onTouchMoveSend'](_0x4ad826){var _0x1c8816=control['lookup']('finger');var _0xdff4be=control['lookup']('raw_msg');var _0x1da431={'code':0x73,'msg':'','motionFs':[],'timestamp':_0x4ad826['timeStamp']};var _0x2ffddf;if(this['remoteVideo_']){var _0x3d6d71={'fid':Math['abs'](_0x4ad826['button']),'x':_0x4ad826['offsetX']/this['remoteVideo_']['offsetWidth'],'y':_0x4ad826['offsetY']/this['remoteVideo_']['offsetHeight']};}else{var _0x3d6d71={'fid':Math['abs'](_0x4ad826['button']),'x':_0x4ad826['offsetX']/_0x4ad826['offsetWidth'],'y':_0x4ad826['offsetY']/_0x4ad826['offsetHeight']};}_0x1da431['motionFs']['push'](_0x1c8816['create'](_0x3d6d71));_0x2ffddf=_0xdff4be['encode'](_0xdff4be['create'](_0x1da431))['finish']();this['onSendChannelData_'](_0x2ffddf)['then'](_0x58413=>{});}['onKeyDownCorSend'](){var _0x1c4888=[];var _0x39622e={};var _0x40ac10={};var _0x533b04={};this['touches']['forEach']((_0x1b15f0,_0x52afbc)=>{if(_0x1b15f0['keyCode']=='65'||_0x1b15f0['keyCode']=='87'||_0x1b15f0['keyCode']=='83'||_0x1b15f0['keyCode']=='68'){_0x1c4888['push'](_0x1b15f0);}});_0x1c4888['forEach'](_0x2e7246=>{if(_0x2e7246['keyCode']=='65'||_0x2e7246['keyCode']=='68'){_0x39622e=_0x2e7246;}if(_0x2e7246['keyCode']=='87'||_0x2e7246['keyCode']=='83'){_0x40ac10=_0x2e7246;}});_0x533b04['xpos']=(_0x39622e['xpos']+_0x40ac10['xpos'])/0x2;_0x533b04['ypos']=(_0x39622e['ypos']+_0x40ac10['ypos'])/(0xe9696^0xe9694);_0x533b04['finger-id']=0x5b6ca^0x5b6c0;_0x533b04['type']='keycordown';this['touches']=this['touches']['filter'](_0x315bd7=>{!_0x1c4888['includes'](_0x315bd7);});this['touches']['push'](_0x533b04);var _0x3fbf81={};if(this['touches']['length']>(0x68395^0x68394)){_0x3fbf81['code']=CODE_NUMBER['CodeFingersDown'];}else{_0x3fbf81['code']=CODE_NUMBER['CodeFingerDown'];}_0x3fbf81['body']=_0x533b04;if(this['stream']){this['onSendChannelData_'](_0x3fbf81)['then'](_0x529e25=>{});}}['onKeyMoveSend'](_0x390f6c){let _0x3c26ce={};_0x3c26ce['code']=CODE_NUMBER['CodeFingerMove'];var _0x122d97={'count':_0x390f6c['length'],'fingers':[]};if(_0x390f6c['length']){_0x390f6c['forEach'](_0x14f5e2=>{let _0x1520be={'xpos':_0x14f5e2['xpos'],'ypos':_0x14f5e2['ypos']};_0x1520be['finger-id']=_0x14f5e2['finger-id'];_0x122d97['fingers']['push'](_0x1520be);});}_0x3c26ce['body']=_0x122d97;this['onSendChannelData_'](_0x3c26ce)['then'](_0x296b89=>{});}['changeResoution'](_0x1d020a){var _0x5c72e0={'body':{'set_resolution':_0x1d020a}};_0x5c72e0['code']=CODE_NUMBER['CodeDefinition'];this['onSendChannelData_'](_0x5c72e0)['then'](_0x2bb30c=>{});}['onBackHome'](_0x482e4e){let _0x97a86d={'body':{'key':0x1000090}};_0x97a86d['code']=CODE_NUMBER['CodeKeyDown'];this['onSendChannelData_'](JSON['stringify'](_0x97a86d))['then'](_0x3c31e4=>{});let _0x3e6e8b={'body':{'key':0x1000090}};_0x3e6e8b['code']=CODE_NUMBER['CodeKeyUp'];this['onSendChannelData_'](JSON['stringify'](_0x3e6e8b))['then'](_0x814bd=>{});}['clearUp'](_0x41308b){let _0x54dc51={'body':{'key':0x1010000}};_0x54dc51['code']=CODE_NUMBER['CodeKeyDown'];this['onSendChannelData_'](JSON['stringify'](_0x54dc51))['then'](_0x37fc91=>{});let _0xde138f={'body':{'key':0x1010000}};_0xde138f['code']=CODE_NUMBER['CodeKeyUp'];this['onSendChannelData_'](JSON['stringify'](_0xde138f))['then'](_0x3b7129=>{});}['onBackLast'](_0x234158){let _0x262169={'body':{'key':0x1000061}};_0x262169['code']=CODE_NUMBER['CodeKeyDown'];this['onSendChannelData_'](JSON['stringify'](_0x262169))['then'](_0x4ec653=>{this['trace_'](_0x4ec653);});let _0x1a502a={'body':{'key':0x1000061}};_0x1a502a['code']=CODE_NUMBER['CodeKeyUp'];this['onSendChannelData_'](JSON['stringify'](_0x1a502a))['then'](_0x15f909=>{this['trace_'](_0x15f909);});}['trace_'](_0xe318e9){if(this['loadingParams_']['debug']){console['log'](_0xe318e9);}}}export default AppController;